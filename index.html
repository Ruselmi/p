<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Hub HD: UNO, Catur, Monopoly, Hand AI</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="hero">
      <h1>üéÆ Game Hub HD</h1>
      <p>UNO Flip/Mercy, Catur, Monopoly Board, Hand Avatar AI, dan multiplayer P2P antar device.</p>
    </header>

    <section class="p2p-box">
      <h2>üåê Opsi Main Online P2P (PeerJS)</h2>
      <div class="panel-row">
        <button id="createRoomBtn">Buat Room (4 kode)</button>
        <input id="joinCodeInput" maxlength="4" placeholder="kode room" />
        <button id="joinRoomBtn">Gabung Room</button>
        <button id="leaveRoomBtn">Keluar Room</button>
      </div>
      <p id="p2pStatus" class="status-pill">Offline</p>
      <p id="roomCodeBadge" class="status-pill">Room: -</p>
      <p class="hint">Host + maksimal 3 client (total 4 pemain). Bisa antar device dalam internet.</p>
    </section>

    <nav class="tabs">
      <button class="tab-btn active" data-tab="uno">UNO HD</button>
      <button class="tab-btn" data-tab="chess">Catur HD</button>
      <button class="tab-btn" data-tab="monopoly">Monopoly Board HD</button>
      <button class="tab-btn" data-tab="hand-ai">Hand Avatar AI</button>
    </nav>

    <main>
      <section id="uno" class="tab active">
        <h2>UNO HD Arena</h2>
        <div class="panel-row card-panel">
          <label for="unoMode">Mode UNO:</label>
          <select id="unoMode">
            <option value="classic">Classic</option>
            <option value="flip">Flip (1 kartu 2 data)</option>
            <option value="mercy">Mercy (+10 / +8)</option>
            <option value="fkk">FKK</option>
          </select>
          <button id="startUno">Mulai Ulang UNO</button>
          <button id="unoDraw">Ambil Kartu</button>
        </div>
        <p id="unoStatus" class="status-pill"></p>

        <div class="card-zone">
          <article class="info-card">
            <h3>Kartu Atas</h3>
            <div id="unoTopCard" class="card">-</div>
          </article>
          <article class="info-card">
            <h3>Tangan Bot</h3>
            <div id="unoBotCount">0 kartu</div>
          </article>
          <article class="info-card">
            <h3>Sisi Aktif Flip</h3>
            <div id="unoSideBadge" class="status-pill">FRONT</div>
          </article>
        </div>

        <h3>Tangan Kamu</h3>
        <div id="unoHand" class="hand"></div>

        <details class="rules-box">
          <summary>Hukum / Cara Main UNO</summary>
          <ul>
            <li>Mode Flip: satu kartu punya 2 data (front/back). Jika kartu <b>flip</b> keluar, sisi permainan dibalik.</li>
            <li>Mode Mercy: kartu aksi <b>+10</b> dan <b>+8</b> memberi tambahan kartu ke lawan saat dimainkan.</li>
            <li>Kartu dimainkan jika warna/angka cocok dengan kartu atas pada sisi aktif.</li>
          </ul>
        </details>
      </section>

      <section id="chess" class="tab">
        <h2>Catur HD Battle</h2>
        <div class="panel-row card-panel">
          <button id="resetChess">Reset Catur</button>
          <span id="chessStatus" class="status-pill"></span>
        </div>
        <div id="chessBoard" class="chess-board"></div>

        <details class="rules-box">
          <summary>Hukum / Cara Main Catur (Versi Game Ini)</summary>
          <ul>
            <li>Langkah dasar bidak valid (pawn, knight, bishop, rook, queen, king).</li>
            <li>Jika Raja atau Ratu tertangkap maka game tamat.</li>
            <li>Bisa dimainkan P2P: langkah sinkron antar device.</li>
          </ul>
        </details>
      </section>

      <section id="monopoly" class="tab">
        <h2>Monopoly Bank + Board HD</h2>
        <div id="monopolyBoard" class="mono-board"></div>

        <div class="panel-row card-panel">
          <input id="playerName" placeholder="Nama pemain" />
          <input id="startBalance" type="number" placeholder="Saldo awal" value="1500" />
          <button id="addPlayer">Tambah Pemain</button>
        </div>
        <div class="panel-row card-panel">
          <select id="fromPlayer"></select>
          <select id="toPlayer"></select>
          <input id="transferAmount" type="number" placeholder="Jumlah transfer" />
          <button id="transferBtn">Transfer</button>
        </div>
        <div class="panel-row card-panel">
          <select id="bankPlayer"></select>
          <input id="bankAmount" type="number" placeholder="+ kredit, - debit" />
          <button id="bankTxnBtn">Transaksi Bank</button>
        </div>

        <h3>Daftar Saldo</h3>
        <ul id="bankLedger"></ul>
        <h3>Riwayat Transaksi</h3>
        <ul id="bankHistory"></ul>

        <details class="rules-box">
          <summary>Hukum / Cara Main Monopoly Bank Edition</summary>
          <ul>
            <li>Board ditampilkan visual HD 16 tile utama.</li>
            <li>Banker bisa kredit/debit; transfer antar pemain jika saldo cukup.</li>
            <li>Saldo ‚â§ 0 dianggap bangkrut dan dicatat.</li>
          </ul>
        </details>
      </section>

      <section id="hand-ai" class="tab">
        <h2>Hand Avatar AI</h2>
        <div class="panel-row card-panel">
          <button id="startHandTracking">Start Kamera & Hand Tracking</button>
          <button id="stopHandTracking">Stop</button>
          <span id="handStatus" class="status-pill">Status: idle</span>
        </div>

        <div class="hand-ai-layout">
          <div class="info-card">
            <h3>Kamera</h3>
            <video id="handVideo" autoplay playsinline muted></video>
            <canvas id="handOverlay"></canvas>
          </div>
          <div class="info-card">
            <h3>Avatar Animate</h3>
            <div id="avatarFace" class="avatar-face">
              <div class="eyes"><span class="eye"></span><span class="eye"></span></div>
              <div id="avatarMouth" class="mouth neutral"></div>
            </div>
            <p id="gestureLabel">Gesture terdeteksi: -</p>
          </div>
        </div>

        <h3>AI Learning Gesture</h3>
        <div class="panel-row card-panel">
          <input id="gestureName" placeholder="Nama gesture" />
          <button id="saveGestureBtn">Simpan Gesture Saat Ini</button>
          <button id="clearGestureBtn">Hapus Semua Data AI</button>
        </div>
        <ul id="gestureSamples"></ul>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="app.js"></script>
  </body>
</html>
